# ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢ - 3 –®–ê–ì–ê –î–û –ó–ê–ü–£–°–ö–ê

**–¶–µ–ª—å:** –ó–∞–ø—É—Å—Ç–∏—Ç—å LootLink –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ 91.218.245.178 –∑–∞ 1 —á–∞—Å

---

## üìã –®–ê–ì 1: –ü–û–î–ì–û–¢–û–í–ö–ê (10 –º–∏–Ω—É—Ç –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ)

### 1.1 –ò—Å–ø—Ä–∞–≤–∏—Ç—å ALLOWED_HOSTS

–û—Ç–∫—Ä–æ–π—Ç–µ `config/settings.py`, –Ω–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 31 –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

**–ë—ã–ª–æ:**
```python
ALLOWED_HOSTS = config('ALLOWED_HOSTS', default='localhost,127.0.0.1').split(',')
```

**–°—Ç–∞–ª–æ:**
```python
ALLOWED_HOSTS = config('ALLOWED_HOSTS', default='localhost,127.0.0.1,91.218.245.178').split(',')
```

### 1.2 –î–æ–±–∞–≤–∏—Ç—å CSRF_TRUSTED_ORIGINS

–í —Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ `config/settings.py`, –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 31 –¥–æ–±–∞–≤—å—Ç–µ:

```python
# CSRF Trusted Origins –¥–ª—è HTTPS
CSRF_TRUSTED_ORIGINS = config(
    'CSRF_TRUSTED_ORIGINS', 
    default='http://91.218.245.178,https://91.218.245.178'
).split(',')
```

### 1.3 –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

```powershell
git add config/settings.py
git commit -m "Fix ALLOWED_HOSTS for production server"
```

---

## üñ•Ô∏è –®–ê–ì 2: –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï –ö –°–ï–†–í–ï–†–£ (5 –º–∏–Ω—É—Ç)

### 2.1 –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –ø–æ SSH

```powershell
ssh root@91.218.245.178
```

**–ü–∞—Ä–æ–ª—å:** `BWJ_1anRP0`

### 2.2 –°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

```bash
passwd
```

–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –∏ –∑–∞–ø–∏—à–∏—Ç–µ –µ–≥–æ!

---

## üöÄ –®–ê–ì 3: –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –î–ï–ü–õ–û–ô (45 –º–∏–Ω—É—Ç)

### 3.1 –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

**–í–∞—Ä–∏–∞–Ω—Ç –ê: –ß–µ—Ä–µ–∑ Git (–µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)**

```bash
cd /opt
sudo git clone https://github.com/–≤–∞—à-username/LootLink.git lootlink
cd lootlink
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞**

–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Windows PowerShell):

```powershell
# –°–æ–∑–¥–∞—Ç—å zip –∞—Ä—Ö–∏–≤ (–∏—Å–∫–ª—é—á–∞—è –Ω–µ–Ω—É–∂–Ω–æ–µ)
cd C:\Users\ivanp\Desktop\LootLink
Compress-Archive -Path * -DestinationPath lootlink.zip -Force

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
scp lootlink.zip root@91.218.245.178:/tmp/

# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å
ssh root@91.218.245.178
cd /opt
sudo mkdir -p lootlink
cd lootlink
sudo unzip /tmp/lootlink.zip
```

### 3.2 –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
cd /opt/lootlink
sudo chmod +x scripts/deploy_to_vps.sh
sudo bash scripts/deploy_to_vps.sh
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç Python, PostgreSQL, Nginx, Redis
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç .env —Ñ–∞–π–ª
- ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç systemd —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏—Ç firewall

**–í–æ –≤—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:**
1. –í–∞—Å –ø–æ–ø—Ä–æ—Å—è—Ç —Å–æ–∑–¥–∞—Ç—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —Å–æ–∑–¥–∞–π—Ç–µ:
   - Username: `admin`
   - Email: `admin@lootlink.ru`
   - Password: (–ø—Ä–∏–¥—É–º–∞–π—Ç–µ)

### 3.3 –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–æ

```bash
sudo systemctl status lootlink nginx postgresql redis
```

–í—Å–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `active (running)` ‚úÖ

---

## ‚úÖ –ü–†–û–í–ï–†–ö–ê: –°–ê–ô–¢ –†–ê–ë–û–¢–ê–ï–¢!

### –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

**–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
```
http://91.218.245.178
```

**–ê–¥–º–∏–Ω–∫–∞:**
```
http://91.218.245.178/admin
```

–í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (admin / –≤–∞—à –ø–∞—Ä–æ–ª—å)

---

## üéâ –ì–û–¢–û–í–û! –°–∞–π—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!

### –ß—Ç–æ –¥–∞–ª—å—à–µ?

1. ‚úÖ –î–æ–±–∞–≤—å—Ç–µ –∏–≥—Ä—ã –≤ –∫–∞—Ç–∞–ª–æ–≥ (—á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É)
2. ‚úÖ –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

## üÜò –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl status lootlink nginx

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
sudo journalctl -u lootlink -n 50
sudo tail -f /var/log/nginx/lootlink-error.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
sudo systemctl restart lootlink nginx
```

### 400 Bad Request

**–ü—Ä–∏—á–∏–Ω–∞:** ALLOWED_HOSTS –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
sudo nano /opt/lootlink/.env
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –µ—Å—Ç—å: ALLOWED_HOSTS=91.218.245.178
sudo systemctl restart lootlink
```

### 502 Bad Gateway

**–ü—Ä–∏—á–∏–Ω–∞:** Gunicorn –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
sudo systemctl restart lootlink
sudo systemctl status lootlink
```

### 500 Internal Server Error

**–ü—Ä–∏—á–∏–Ω–∞:** –û—à–∏–±–∫–∞ –≤ Django

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–º–æ—Ç—Ä–∏–º –ª–æ–≥–∏
sudo journalctl -u lootlink -n 100
```

---

## üìû –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Django
sudo systemctl restart lootlink

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Nginx
sudo systemctl restart nginx

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ
sudo systemctl restart lootlink nginx lootlink-celery lootlink-celery-beat

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Django
sudo journalctl -u lootlink -f

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Nginx
sudo tail -f /var/log/nginx/lootlink-error.log

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
sudo systemctl status lootlink nginx postgresql redis
```

---

## üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- **`–ü–û–õ–ù–´–ô_–ê–ù–ê–õ–ò–ó_–ò_–ü–õ–ê–ù.md`** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞
- **`–ù–ê–°–¢–†–û–ô–ö–ê_–°–ï–†–í–ï–†–ê_91.218.245.178.md`** - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- **`–ö–†–ê–¢–ö–ê–Ø_–°–í–û–î–ö–ê_–ê–ù–ê–õ–ò–ó–ê.md`** - –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞

---

## üéØ –ò–¢–û–ì

**–í—Ä–µ–º—è:** ~1 —á–∞—Å  
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –†–∞–±–æ—Ç–∞—é—â–∏–π —Å–∞–π—Ç –Ω–∞ http://91.218.245.178  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL (HTTPS)
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email –æ—Ç–ø—Ä–∞–≤–∫—É
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry)
5. –ö—É–ø–∏—Ç—å –¥–æ–º–µ–Ω –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å DNS

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞! üöÄ**


