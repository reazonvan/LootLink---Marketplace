# üìßüì± –°–¢–ê–¢–£–° EMAIL –ò SMS - –ì–û–¢–û–í–û –ö –ù–ê–°–¢–†–û–ô–ö–ï!

**–î–∞—Ç–∞:** 28 –æ–∫—Ç—è–±—Ä—è 2025, 23:45  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω

---

## ‚úÖ –ß–¢–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û:

### 1. **Email –æ—Ç–ø—Ä–∞–≤–∫–∞:**
- ‚úÖ –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - —Å—Å—ã–ª–∫–∞ + –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏ —Å–±—Ä–æ—Å–µ –ø–∞—Ä–æ–ª—è - 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Gmail, Yandex, Mail.ru, SendGrid
- ‚úÖ Graceful fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### 2. **SMS –æ—Ç–ø—Ä–∞–≤–∫–∞:**
- ‚úÖ –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- ‚úÖ –ü—Ä–∏ —Å–±—Ä–æ—Å–µ –ø–∞—Ä–æ–ª—è - —Ç–æ—Ç –∂–µ –∫–æ–¥ —á—Ç–æ –∏ –≤ email
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å SMS.ru (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Å–µ—Ä–≤–∏—Å)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞–ª–∏—á–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—Ç–ø—Ä–∞–≤–æ–∫

### 3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ö–æ–¥—ã –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ (15 –º–∏–Ω—É—Ç)
- ‚úÖ –°—Ç–∞—Ä—ã–µ –∫–æ–¥—ã –¥–µ–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è
- ‚úÖ –î–≤–æ–π–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ (email + SMS)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

## üìÅ –§–ê–ô–õ–´ –ù–ê –°–ï–†–í–ï–†–ï:

–£–∂–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ `core/sms_service.py` - —Å–µ—Ä–≤–∏—Å SMS
- ‚úÖ `accounts/forms.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- ‚úÖ `accounts/views.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- ‚úÖ `config/settings.py` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SMS
- ‚úÖ `scripts/test_sms_email.py` - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ `requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω requests

---

## ‚öôÔ∏è –¢–ï–ö–£–©–ò–ï –ù–ê–°–¢–†–û–ô–ö–ò:

### –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Å–µ–π—á–∞—Å:

```env
# Email: –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –≤—ã–≤–æ–¥ (–¥–ª—è —Ç–µ—Å—Ç–æ–≤)
EMAIL_BACKEND=django.core.mail.backends.console.EmailBackend

# SMS: –û—Ç–∫–ª—é—á–µ–Ω—ã (–≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å)
SMS_ENABLED=False
```

**–ö–æ–¥—ã –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω–æ**, –Ω–æ **–≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏.

---

## üöÄ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –î–õ–Ø –†–ï–ê–õ–¨–ù–û–ô –û–¢–ü–†–ê–í–ö–ò:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –¢–û–õ–¨–ö–û EMAIL (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, 5 –º–∏–Ω—É—Ç)

1. –ü–æ–ª—É—á–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Gmail: https://myaccount.google.com/apppasswords
2. –û–±–Ω–æ–≤–∏—Ç–µ .env –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   ssh root@91.218.245.178
   nano /opt/lootlink/.env
   ```
3. –î–æ–±–∞–≤—å—Ç–µ:
   ```env
   EMAIL_BACKEND=django.core.mail.backends.smtp.EmailBackend
   EMAIL_HOST=smtp.gmail.com
   EMAIL_PORT=587
   EMAIL_USE_TLS=True
   EMAIL_HOST_USER=–≤–∞—à-email@gmail.com
   EMAIL_HOST_PASSWORD=–ø–∞—Ä–æ–ª—å-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   DEFAULT_FROM_EMAIL=noreply@lootlink.com
   ```
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `sudo systemctl restart lootlink`

### –í–∞—Ä–∏–∞–Ω—Ç 2: EMAIL + SMS (300‚ÇΩ, 15 –º–∏–Ω—É—Ç)

1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Email (—Å–º. –≤—ã—à–µ)
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://sms.ru
3. –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å: 300‚ÇΩ
4. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
5. –î–æ–±–∞–≤—å—Ç–µ –≤ .env:
   ```env
   SMS_ENABLED=True
   SMS_RU_API_KEY=–≤–∞—à-–∫–ª—é—á
   ```
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ: `sudo systemctl restart lootlink`

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
cd /opt/lootlink
source venv/bin/activate
python scripts/test_sms_email.py
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- ‚úÖ Email –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ SMS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏  
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

---

## üìä –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢:

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: username, email, phone, –ø–∞—Ä–æ–ª—å
2. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç:
   - Email —Ç–æ–∫–µ–Ω (—Å—Å—ã–ª–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏)
   - SMS –∫–æ–¥ (6 —Ü–∏—Ñ—Ä)
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   ‚úâÔ∏è  Email: "–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ: http://... –∏–ª–∏ –∫–æ–¥: 123456"
   üì± SMS: "LootLink: –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å! –ö–æ–¥: 123456"
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç:
   - –ö–ª–∏–∫–∞–µ—Ç –ø–æ —Å—Å—ã–ª–∫–µ –≤ email, –ò–õ–ò
   - –í–≤–æ–¥–∏—Ç –∫–æ–¥ –∏–∑ SMS/email
```

### –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email
2. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç 6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:
   ‚úâÔ∏è  Email: "–í–∞—à –∫–æ–¥: 123456"
   üì± SMS: "–ö–æ–¥ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è: 123456" (–µ—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω)
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –∏ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
```

---

## üí° –ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –î–í–û–ô–ù–û–ô –î–û–°–¢–ê–í–ö–ò:

1. **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:** –ï—Å–ª–∏ email –Ω–µ –¥–æ—à–µ–ª - –µ—Å—Ç—å SMS
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –°–ª–æ–∂–Ω–µ–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å –æ–±–∞ –∫–∞–Ω–∞–ª–∞
3. **–£–¥–æ–±—Å—Ç–≤–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∫–∞–∫ –µ–º—É —É–¥–æ–±–Ω–µ–µ
4. **–î–æ–≤–µ—Ä–∏–µ:** –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

---

## üìà –û–ñ–ò–î–ê–ï–ú–´–ï –†–ê–°–•–û–î–´:

### –ü—Ä–∏ 100 —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ö –≤ –º–µ—Å—è—Ü:

| –ö–∞–Ω–∞–ª | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-------|------------|-----------|
| Email | 200 –ø–∏—Å–µ–º (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è + —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è) | **0‚ÇΩ** (Gmail –±–µ—Å–ø–ª–∞—Ç–Ω–æ) |
| SMS | 100 SMS (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è) | **~210‚ÇΩ** |
| **–ò–¢–û–ì–û** | | **~210‚ÇΩ/–º–µ—Å—è—Ü** |

### –ü—Ä–∏ 1000 —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ö –≤ –º–µ—Å—è—Ü:

| –ö–∞–Ω–∞–ª | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|-------|------------|-----------|
| Email | 2000 –ø–∏—Å–µ–º | **0‚ÇΩ** –∏–ª–∏ ~$10 (SendGrid) |
| SMS | 1000 SMS | **~2100‚ÇΩ** |
| **–ò–¢–û–ì–û** | | **~2100‚ÇΩ/–º–µ—Å—è—Ü** |

**–û—á–µ–Ω—å –¥–µ—à–µ–≤–æ** –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞!

---

## üìù –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø:

- **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** `docs/EMAIL_SMS_SETUP.md`
- **–ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞:** `SETUP_EMAIL_SMS.txt`
- **–ü—Ä–∏–º–µ—Ä .env:** `env.example.sms.txt`
- **–°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∞:** `scripts/test_sms_email.py`

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ù–ê–°–¢–†–û–ô–ö–ò:

- [ ] –ü–æ–ª—É—á–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Gmail
- [ ] –û–±–Ω–æ–≤–∏—Ç—å .env —Å email –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [ ] –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ SMS.ru
- [ ] –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å (300‚ÇΩ)
- [ ] –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á SMS.ru
- [ ] –û–±–Ω–æ–≤–∏—Ç—å .env —Å SMS –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [ ] –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å test_sms_email.py
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

---

## üéØ –°–¢–ê–¢–£–°:

**–ö–æ–¥ –≥–æ—Ç–æ–≤!** ‚úÖ

–û—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (5-15 –º–∏–Ω—É—Ç)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

**–í—Å–µ —Ñ–∞–π–ª—ã —É–∂–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!**

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:**  
–û—Ç–∫—Ä–æ–π `SETUP_EMAIL_SMS.txt` –∏ —Å–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º! üöÄ

