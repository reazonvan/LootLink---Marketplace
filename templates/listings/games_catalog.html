{% extends 'base.html' %}

{% block title %}–ö–∞—Ç–∞–ª–æ–≥ –∏–≥—Ä - LootLink{% endblock %}

{% block content %}
<div class="catalog-hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="gradient-text">–ö–∞—Ç–∞–ª–æ–≥ –∏–≥—Ä</span>
            </h1>
            <p class="hero-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É –∏ –Ω–∞–π–¥–∏—Ç–µ –ª—É—á—à–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</p>
        </div>
    </div>
</div>

<div class="container catalog-container">
    <!-- –£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Å –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º -->
    <div class="search-section">
        <div class="search-box-modern">
            <div class="search-icon-wrapper">
                <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </div>
            <input 
                type="text" 
                id="gameSearchInput" 
                class="search-input-modern" 
                placeholder="–ò—Å–∫–∞—Ç—å –∏–≥—Ä—É: Dota, CS:GO, Minecraft..."
                autocomplete="off"
            >
            <div id="searchResults" class="search-dropdown-modern"></div>
        </div>
        <p class="search-hint">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533L8.93 6.588zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
            </svg>
            –ú–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –ø–æ-—Ä—É—Å—Å–∫–∏ –∏–ª–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
        </p>
    </div>

    <!-- –ë—ã—Å—Ç—Ä–∞—è –∞–ª—Ñ–∞–≤–∏—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    {% if alphabet %}
    <div class="alphabet-navigation">
        <div class="alphabet-scroll">
            {% for letter in alphabet %}
            <a href="#letter-{{ letter }}" class="letter-pill">{{ letter }}</a>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- –ö–∞—Ç–∞–ª–æ–≥ –∏–≥—Ä - –∫—Ä–∞—Å–∏–≤–∞—è —Å–µ—Ç–∫–∞ -->
    <div class="games-grid-modern">
        {% for game in games %}
        {% if game.first_in_letter %}
        <div class="letter-section" id="letter-{{ game.first_letter }}">
            <div class="letter-badge">{{ game.first_letter }}</div>
        </div>
        {% endif %}
        
        <div class="game-card-modern" data-game-name="{{ game.name|lower }}">
            <div class="game-card-background"></div>
            
            <div class="game-card-header">
                <div class="game-icon-modern">
                    <svg class="icon-game" xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M11.5 6.027a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2.5-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm-6.5-3h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"/>
                        <path d="M3.051 3.26a.5.5 0 0 1 .354-.613l1.932-.518a.5.5 0 0 1 .62.39c.655-.079 1.35-.117 2.043-.117.72 0 1.443.041 2.12.126a.5.5 0 0 1 .622-.399l1.932.518a.5.5 0 0 1 .306.729c.14.09.266.19.373.297.408.408.78 1.05 1.095 1.772.32.733.599 1.591.805 2.466.206.875.34 1.78.364 2.606.024.816-.059 1.602-.328 2.21a1.42 1.42 0 0 1-1.445.83c-.636-.067-1.115-.394-1.513-.773-.245-.232-.496-.526-.739-.808-.126-.148-.25-.292-.368-.423-.728-.804-1.597-1.527-3.224-1.527-1.627 0-2.496.723-3.224 1.527-.119.131-.242.275-.368.423-.243.282-.494.575-.739.808-.398.38-.877.706-1.513.773a1.42 1.42 0 0 1-1.445-.83c-.27-.608-.352-1.395-.329-2.21.024-.826.16-1.73.365-2.606.206-.875.486-1.733.805-2.466.315-.722.687-1.364 1.094-1.772a2.34 2.34 0 0 1 .433-.335.504.504 0 0 1-.028-.079zm2.036.412c-.877.185-1.469.443-1.733.708-.276.276-.587.783-.885 1.465a13.748 13.748 0 0 0-.748 2.295 12.351 12.351 0 0 0-.339 2.406c-.022.755.062 1.368.243 1.776a.42.42 0 0 0 .426.24c.327-.034.61-.199.929-.502.212-.202.4-.423.615-.674.133-.156.276-.323.44-.504C4.861 9.969 5.978 9.027 8 9.027s3.139.942 3.965 1.855c.164.181.307.348.44.504.214.251.403.472.615.674.318.303.601.468.929.503a.42.42 0 0 0 .426-.241c.18-.408.265-1.02.243-1.776a12.354 12.354 0 0 0-.339-2.406 13.753 13.753 0 0 0-.748-2.295c-.298-.682-.61-1.19-.885-1.465-.264-.265-.856-.523-1.733-.708-.85-.179-1.877-.27-2.913-.27-1.036 0-2.063.091-2.913.27z"/>
                    </svg>
                </div>
                <h3 class="game-title-modern">{{ game.name }}</h3>
                {% if game.categories.all %}
                <div class="game-stats">
                    <span class="stat-badge">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M2 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H4z"/>
                            <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
                        </svg>
                        {{ game.categories.all|length }} {{ game.categories.all|length|pluralize:"–∫–∞—Ç–µ–≥–æ—Ä–∏—è,–∫–∞—Ç–µ–≥–æ—Ä–∏–∏,–∫–∞—Ç–µ–≥–æ—Ä–∏–π" }}
                    </span>
                </div>
                {% endif %}
            </div>
            
            {% if game.categories.all %}
            <div class="game-categories-modern">
                {% for category in game.categories.all|slice:":6" %}
                <a href="{% url 'listings:category_listings' game.slug category.slug %}" class="category-link-modern">
                    <i class="{{ category.icon }} category-icon-mini"></i>
                    <span>{{ category.name }}</span>
                    <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                    </svg>
                </a>
                {% endfor %}
                {% if game.categories.all|length > 6 %}
                <div class="more-categories">
                    +{{ game.categories.all|length|add:"-6" }} –µ—â–µ
                </div>
                {% endif %}
            </div>
            {% else %}
            <div class="no-categories">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/>
                </svg>
                –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–∫–æ—Ä–æ –ø–æ—è–≤—è—Ç—Å—è
            </div>
            {% endif %}
        </div>
        {% empty %}
        <div class="empty-catalog">
            <div class="empty-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
                </svg>
            </div>
            <h3>–ö–∞—Ç–∞–ª–æ–≥ –ø—É—Å—Ç</h3>
            <p>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∫–æ—Ä–æ –¥–æ–±–∞–≤–∏—Ç –∏–≥—Ä—ã</p>
        </div>
        {% endfor %}
    </div>
</div>

<!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –Ω–∞–≤–µ—Ä—Ö -->
<button id="scrollTopBtn" class="scroll-top-modern">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
    </svg>
</button>

<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MODERN GAME CATALOG - –ö–†–ê–°–ò–í–´–ô –î–ò–ó–ê–ô–ù 2025
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

/* –ì–µ—Ä–æ–∏—á–µ—Å–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
.catalog-hero {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 3rem 0 2.5rem;
    position: relative;
    overflow: hidden;
}

.catalog-hero::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') bottom no-repeat;
    background-size: cover;
    opacity: 0.3;
}

.hero-content {
    position: relative;
    text-align: center;
    color: white;
}

.hero-title {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 0.75rem;
    letter-spacing: -0.02em;
}

.gradient-text {
    background: linear-gradient(90deg, #fff 0%, #f0f0f0 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-subtitle {
    font-size: 1.125rem;
    opacity: 0.95;
    font-weight: 400;
    margin: 0;
}

.catalog-container {
    padding: 2rem 0 4rem;
}

/* –£–º–Ω—ã–π –ø–æ–∏—Å–∫ */
.search-section {
    max-width: 700px;
    margin: 0 auto 2.5rem;
}

.search-box-modern {
    position: relative;
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08), 0 2px 8px rgba(0, 0, 0, 0.04);
    border: 2px solid transparent;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.search-box-modern:focus-within {
    border-color: #667eea;
    box-shadow: 0 20px 60px rgba(102, 126, 234, 0.15), 0 0 0 4px rgba(102, 126, 234, 0.08);
    transform: translateY(-2px);
}

.search-icon-wrapper {
    position: absolute;
    left: 1.25rem;
    top: 50%;
    transform: translateY(-50%);
    color: #9ca3af;
    transition: color 0.2s;
    z-index: 1;
}

.search-box-modern:focus-within .search-icon-wrapper {
    color: #667eea;
}

.search-input-modern {
    width: 100%;
    padding: 1.125rem 1.5rem 1.125rem 3.5rem;
    border: none;
    outline: none;
    font-size: 1.0625rem;
    font-weight: 500;
    color: #1e293b;
    background: transparent;
    border-radius: 20px;
}

.search-input-modern::placeholder {
    color: #9ca3af;
    font-weight: 400;
}

.search-hint {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    justify-content: center;
    margin-top: 0.75rem;
    font-size: 0.875rem;
    color: #64748b;
}

.search-hint svg {
    flex-shrink: 0;
}

.search-dropdown-modern {
    position: absolute;
    top: calc(100% + 0.5rem);
    left: 0;
    right: 0;
    background: white;
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.04);
    max-height: 400px;
    overflow-y: auto;
    display: none;
    z-index: 50;
    animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.search-dropdown-modern.active {
    display: block;
}

/* –ê–ª—Ñ–∞–≤–∏—Ç–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
.alphabet-navigation {
    position: sticky;
    top: 56px;
    z-index: 40;
    background: linear-gradient(to bottom, white 0%, white 80%, rgba(255,255,255,0.9) 100%);
    padding: 1rem 0;
    margin-bottom: 2rem;
    border-bottom: 1px solid #e5e7eb;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.03);
    backdrop-filter: blur(8px);
}

.alphabet-scroll {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    justify-content: center;
    max-width: 1000px;
    margin: 0 auto;
}

.letter-pill {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 40px;
    height: 40px;
    padding: 0 0.75rem;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 2px solid transparent;
    border-radius: 12px;
    font-weight: 600;
    font-size: 0.9375rem;
    color: #475569;
    text-decoration: none;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.letter-pill:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-color: #667eea;
    transform: translateY(-3px);
    box-shadow: 0 8px 16px rgba(102, 126, 234, 0.3);
}

.letter-pill:active {
    transform: translateY(-1px);
}

/* –°–µ–∫—Ü–∏—è –±—É–∫–≤—ã */
.letter-section {
    grid-column: 1 / -1;
    margin: 2rem 0 1.5rem;
    scroll-margin-top: 180px;
}

.letter-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    font-size: 2rem;
    font-weight: 800;
    border-radius: 16px;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
}

/* –°–µ—Ç–∫–∞ –∏–≥—Ä */
.games-grid-modern {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.75rem;
    max-width: 1400px;
    margin: 0 auto;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–≥—Ä—ã - –°–û–í–†–ï–ú–ï–ù–ù–´–ô –î–ò–ó–ê–ô–ù */
.game-card-modern {
    position: relative;
    background: white;
    border-radius: 20px;
    padding: 1.75rem;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    border: 2px solid #f1f5f9;
    overflow: hidden;
}

.game-card-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    opacity: 0;
    transition: opacity 0.3s;
}

.game-card-modern:hover {
    transform: translateY(-8px);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.06);
    border-color: #667eea;
}

.game-card-modern:hover .game-card-background {
    opacity: 1;
}

.game-card-header {
    text-align: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1.25rem;
    border-bottom: 2px solid #f1f5f9;
}

.game-icon-modern {
    width: 70px;
    height: 70px;
    margin: 0 auto 1rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 18px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
    transition: all 0.3s;
}

.game-card-modern:hover .game-icon-modern {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 12px 32px rgba(102, 126, 234, 0.4);
}

.game-title-modern {
    font-size: 1.125rem;
    font-weight: 700;
    color: #1e293b;
    margin: 0 0 0.75rem;
    line-height: 1.4;
}

.game-stats {
    display: flex;
    justify-content: center;
    gap: 0.75rem;
    margin-top: 0.75rem;
}

.stat-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.375rem 0.75rem;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 8px;
    font-size: 0.813rem;
    font-weight: 600;
    color: #64748b;
}

/* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ - –°–û–í–†–ï–ú–ï–ù–ù–´–ô –î–ò–ó–ê–ô–ù */
.game-categories-modern {
    display: flex;
    flex-direction: column;
    gap: 0.625rem;
}

.category-link-modern {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.875rem 1rem;
    background: #f8f9fa;
    border: 2px solid transparent;
    border-radius: 14px;
    text-decoration: none;
    color: #475569;
    font-size: 0.9375rem;
    font-weight: 600;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.category-link-modern::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0;
    background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
    transition: width 0.3s;
}

.category-link-modern:hover::before {
    width: 4px;
}

.category-link-modern:hover {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-color: #667eea;
    padding-left: 1.25rem;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
}

.category-icon-mini {
    font-size: 1rem;
    flex-shrink: 0;
    opacity: 0.8;
}

.category-link-modern span {
    flex: 1;
}

.arrow-icon {
    flex-shrink: 0;
    opacity: 0;
    transform: translateX(-5px);
    transition: all 0.2s;
}

.category-link-modern:hover .arrow-icon {
    opacity: 1;
    transform: translateX(0);
}

.more-categories {
    text-align: center;
    padding: 0.625rem;
    color: #64748b;
    font-size: 0.875rem;
    font-weight: 600;
    background: #f8f9fa;
    border-radius: 10px;
}

.no-categories {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.625rem;
    padding: 1.25rem;
    background: #fef3c7;
    border-radius: 12px;
    color: #92400e;
    font-size: 0.9375rem;
    font-weight: 600;
}

/* –ü—É—Å—Ç–æ–π –∫–∞—Ç–∞–ª–æ–≥ */
.empty-catalog {
    grid-column: 1 / -1;
    text-align: center;
    padding: 4rem 2rem;
    background: white;
    border-radius: 20px;
    border: 2px dashed #e5e7eb;
}

.empty-icon {
    margin: 0 auto 1.5rem;
    color: #cbd5e1;
}

.empty-catalog h3 {
    font-size: 1.5rem;
    color: #475569;
    margin-bottom: 0.5rem;
}

.empty-catalog p {
    color: #94a3b8;
    font-size: 1.0625rem;
    margin: 0;
}

/* –ö–Ω–æ–ø–∫–∞ –Ω–∞–≤–µ—Ä—Ö */
.scroll-top-modern {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    width: 56px;
    height: 56px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 45;
}

.scroll-top-modern.visible {
    display: flex;
}

.scroll-top-modern:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.5);
}

.scroll-top-modern:active {
    transform: translateY(-3px);
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
@media (min-width: 1400px) {
    .games-grid-modern {
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    }
}

@media (max-width: 992px) {
    .hero-title {
        font-size: 2rem;
    }
    
    .games-grid-modern {
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 1.5rem;
    }
}

@media (max-width: 768px) {
    .catalog-hero {
        padding: 2rem 0 1.5rem;
    }
    
    .hero-title {
        font-size: 1.75rem;
    }
    
    .hero-subtitle {
        font-size: 1rem;
    }
    
    .search-box-modern {
        border-radius: 16px;
    }
    
    .search-input-modern {
        padding: 1rem 1.25rem 1rem 3.25rem;
        font-size: 1rem;
    }
    
    .alphabet-navigation {
        padding: 0.75rem 0;
    }
    
    .alphabet-scroll {
        gap: 0.375rem;
    }
    
    .letter-pill {
        min-width: 36px;
        height: 36px;
        font-size: 0.875rem;
    }
    
    .games-grid-modern {
        grid-template-columns: 1fr;
        gap: 1.25rem;
    }
    
    .game-card-modern {
        padding: 1.5rem;
    }
    
    .letter-badge {
        width: 50px;
        height: 50px;
        font-size: 1.75rem;
    }
    
    .scroll-top-modern {
        width: 50px;
        height: 50px;
        bottom: 1.5rem;
        right: 1.5rem;
    }
}

/* –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ */
.game-card-modern.search-hidden {
    display: none;
}

.letter-section.search-hidden {
    display: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('gameSearchInput');
    const searchResults = document.getElementById('searchResults');
    const gameCards = document.querySelectorAll('.game-card-modern');
    const letterSections = document.querySelectorAll('.letter-section');
    const scrollTopBtn = document.getElementById('scrollTopBtn');
    
    // –ò–Ω–¥–µ–∫—Å –∏–≥—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞
    const gamesIndex = Array.from(gameCards).map(card => ({
        name: card.dataset.gameName,
        card: card
    }));
    
    // –ü–æ–∏—Å–∫ –∏–≥—Ä
    searchInput.addEventListener('input', function() {
        const query = this.value.toLowerCase().trim();
        
        if (!query) {
            gameCards.forEach(card => card.classList.remove('search-hidden'));
            letterSections.forEach(section => section.classList.remove('search-hidden'));
            searchResults.classList.remove('active');
            searchResults.innerHTML = '';
            return;
        }
        
        const matches = gamesIndex.filter(game => game.name.includes(query));
        
        if (matches.length > 0) {
            searchResults.innerHTML = matches.slice(0, 8).map(game => `
                <div class="search-result-modern" data-game="${game.name}">
                    <div class="search-result-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M11.5 6.027a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm2.5-.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm-1.5 1.5a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1zm-6.5-3h1v1h1v1h-1v1h-1v-1h-1v-1h1v-1z"/>
                            <path d="M3.051 3.26a.5.5 0 0 1 .354-.613l1.932-.518a.5.5 0 0 1 .62.39c.655-.079 1.35-.117 2.043-.117.72 0 1.443.041 2.12.126a.5.5 0 0 1 .622-.399l1.932.518a.5.5 0 0 1 .306.729c.14.09.266.19.373.297.408.408.78 1.05 1.095 1.772.32.733.599 1.591.805 2.466.206.875.34 1.78.364 2.606.024.816-.059 1.602-.328 2.21a1.42 1.42 0 0 1-1.445.83c-.636-.067-1.115-.394-1.513-.773-.245-.232-.496-.526-.739-.808-.126-.148-.25-.292-.368-.423-.728-.804-1.597-1.527-3.224-1.527-1.627 0-2.496.723-3.224 1.527-.119.131-.242.275-.368.423-.243.282-.494.575-.739.808-.398.38-.877.706-1.513.773a1.42 1.42 0 0 1-1.445-.83c-.27-.608-.352-1.395-.329-2.21.024-.826.16-1.73.365-2.606.206-.875.486-1.733.805-2.466.315-.722.687-1.364 1.094-1.772a2.34 2.34 0 0 1 .433-.335.504.504 0 0 1-.028-.079zm2.036.412c-.877.185-1.469.443-1.733.708-.276.276-.587.783-.885 1.465a13.748 13.748 0 0 0-.748 2.295 12.351 12.351 0 0 0-.339 2.406c-.022.755.062 1.368.243 1.776a.42.42 0 0 0 .426.24c.327-.034.61-.199.929-.502.212-.202.4-.423.615-.674.133-.156.276-.323.44-.504C4.861 9.969 5.978 9.027 8 9.027s3.139.942 3.965 1.855c.164.181.307.348.44.504.214.251.403.472.615.674.318.303.601.468.929.503a.42.42 0 0 0 .426-.241c.18-.408.265-1.02.243-1.776a12.354 12.354 0 0 0-.339-2.406 13.753 13.753 0 0 0-.748-2.295c-.298-.682-.61-1.19-.885-1.465-.264-.265-.856-.523-1.733-.708-.85-.179-1.877-.27-2.913-.27-1.036 0-2.063.091-2.913.27z"/>
                        </svg>
                    </div>
                    <span class="search-result-name">${game.card.querySelector('.game-title-modern').textContent}</span>
                </div>
            `).join('');
            searchResults.classList.add('active');
            
            // –ö–ª–∏–∫ –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
            searchResults.querySelectorAll('.search-result-modern').forEach(item => {
                item.addEventListener('click', function() {
                    const gameName = this.dataset.game;
                    const gameCard = gamesIndex.find(g => g.name === gameName).card;
                    gameCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    searchResults.classList.remove('active');
                });
            });
        } else {
            searchResults.innerHTML = '<div class="search-no-result">–ò–≥—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã üòû</div>';
            searchResults.classList.add('active');
        }
        
        // –§–∏–ª—å—Ç—Ä –∫–∞—Ä—Ç–æ—á–µ–∫
        gameCards.forEach(card => {
            if (card.dataset.gameName.includes(query)) {
                card.classList.remove('search-hidden');
            } else {
                card.classList.add('search-hidden');
            }
        });
        
        // –°–∫—Ä—ã—Ç–∏–µ –ø—É—Å—Ç—ã—Ö —Å–µ–∫—Ü–∏–π
        letterSections.forEach(section => {
            const letter = section.id.replace('letter-', '');
            const hasVisible = Array.from(gameCards).some(card => 
                !card.classList.contains('search-hidden') && 
                card.dataset.gameName[0].toUpperCase() === letter
            );
            section.classList.toggle('search-hidden', !hasVisible);
        });
    });
    
    // –ó–∞–∫—Ä—ã—Ç–∏–µ dropdown
    document.addEventListener('click', function(e) {
        if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
            searchResults.classList.remove('active');
        }
    });
    
    // –ö–Ω–æ–ø–∫–∞ –Ω–∞–≤–µ—Ä—Ö
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 400) {
            scrollTopBtn.classList.add('visible');
        } else {
            scrollTopBtn.classList.remove('visible');
        }
    });
    
    scrollTopBtn.addEventListener('click', function() {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
});
</script>

<style>
/* –°—Ç–∏–ª–∏ –¥–ª—è dropdown –ø–æ–∏—Å–∫–∞ */
.search-result-modern {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    cursor: pointer;
    border-bottom: 1px solid #f1f5f9;
    transition: all 0.2s;
}

.search-result-modern:last-child {
    border-bottom: none;
}

.search-result-modern:hover {
    background: linear-gradient(90deg, #f8f9fa 0%, #f0f2ff 100%);
    padding-left: 2rem;
}

.search-result-icon {
    flex-shrink: 0;
    color: #667eea;
}

.search-result-name {
    font-weight: 600;
    color: #1e293b;
    font-size: 1.0625rem;
}

.search-no-result {
    padding: 2rem 1.5rem;
    text-align: center;
    color: #94a3b8;
    font-weight: 600;
}
</style>
{% endblock %}
